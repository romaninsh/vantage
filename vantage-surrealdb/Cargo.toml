[package]
edition = "2024"
name = "vantage-surrealdb"
version = "0.3.0"
license = "MIT OR Apache-2.0"
authors = ["Romans Malinovskis <me@nearly.guru>"]
description = "Vantage extension for SurrealDB"
documentation = "https://docs.rs/vantage"
homepage = "https://romaninsh.github.io/vantage"
repository = "https://github.com/romaninsh/vantage"
readme = "../README.md"
autoexamples = false

[features]
default = ["decimal"]
decimal = ["surreal-client/decimal", "rust_decimal"]

[dependencies]
async-trait = "0.1"
vantage-core = { path = "../vantage-core" }
vantage-expressions = { path = "../vantage-expressions", features = ["chrono"] }
vantage-table = { path = "../vantage-table" }
vantage-dataset = { path = "../vantage-dataset" }
vantage-types = { path = "../vantage-types", features = ["serde"] }
surreal-client = { path = "../surreal-client" }

ciborium = "0.2"
hex = "0.4"
indexmap = { version = "2.12.0", features = ["serde"] }
paste = "1.0"
serde_json = { version = "1", features = [
    "preserve_order",
    "raw_value",
    "arbitrary_precision",
] }
serde = { version = "1.0", features = ["derive"] }
thiserror = "2.0"
tokio = { version = "1.48", features = ["full"] }
base64 = "0.22"
md5 = "0.8"
serde_path_to_error = "0.1"
rust_decimal = { version = "1.39", optional = true }
uuid = { version = "1.0", features = ["v4"] }
chrono = { version = "0.4", features = ["serde"] }

# Disable all tests except queries.rs during 0.3 migration
[[test]]
name = "search_expression"
path = "tests/search_expression.rs"
test = false

[[test]]
name = "select"
path = "tests/select.rs"
test = false

[[test]]
name = "table_ext"
path = "tests/table_ext.rs"
test = false

[[test]]
name = "table_ext_mocked"
path = "tests/table_ext_mocked.rs"
test = false

[[test]]
name = "test_expressions"
path = "tests/test_expressions.rs"
test = false

[[test]]
name = "test_insert_cbor"
path = "tests/test_insert_cbor.rs"
test = false

[[test]]
name = "test_insert_unstructured"
path = "tests/test_insert_unstructured.rs"
test = false

# Disable queries.rs test until modules are uncommented
[[test]]
name = "queries"
path = "tests/queries.rs"
test = false

# Examples disabled during 0.3 migration (files moved to .disabled)

[[example]]
name = "expr"
path = "examples/expr.rs"
