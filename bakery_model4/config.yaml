entities:
  bakery:
    table: bakery
    id_column: id
    columns:
      - name: id
        type: string
        flags: [id]
      - name: name
        type: string
        flags: [title, searchable]
      - name: profit_margin
        type: int
        rules:
          min: 0
          max: 100
    relations:
      - type: has_many
        name: clients
        foreign_key: bakery
        target: client
      - type: has_many
        name: products
        foreign_key: bakery
        target: product

  client:
    table: client
    id_column: id
    columns:
      - name: id
        type: string
        flags: [id]
      - name: email
        type: string
        flags: [searchable]
        rules:
          email: true
      - name: name
        type: string
        flags: [title, searchable]
      - name: contact_details
        type: string
      - name: is_paying_client
        type: bool
        default: false
      - name: bakery
        type: string
      - name: metadata
    relations:
      - type: belongs_to
        name: bakery
        foreign_key: bakery
        target: bakery

  product:
    table: product
    id_column: id
    columns:
      - name: id
        type: string
        flags: [id]
      - name: name
        type: string
        flags: [title, searchable]
      - name: calories
        type: int
        rules:
          min: 0
      - name: price
        type: int
        rules:
          min: 1
      - name: bakery
        type: string
      - name: is_deleted
        type: bool
        default: false
        flags: [hidden]
      - name: inventory
    relations:
      - type: belongs_to
        name: bakery
        foreign_key: bakery
        target: bakery

  order:
    table: order
    id_column: id
    columns:
      - name: id
        type: string
        flags: [id]
      - name: bakery
        type: string
      - name: is_deleted
        type: bool
        default: false
        flags: [hidden]
      - name: created_at
        type: datetime
        default: now
      - name: lines
        type: array
        default: []
    relations:
      - type: belongs_to
        name: bakery
        foreign_key: bakery
        target: bakery
      - type: belongs_to
        name: client
        foreign_key: client
        target: client
